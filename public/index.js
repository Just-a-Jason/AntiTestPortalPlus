(()=>{"use strict";var e={987:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),r=s(645),i=s.n(r)()(o());i.push([e.id,"@keyframes popUp{from{transform:scale(0)}to{transform:scale(1)}}.ChatGPTResponse-ErrorPopUP{animation:popUp .5s ease-in-out;box-shadow:2px 2px 5px #000;background:#030303;border-radius:10px;text-align:center;padding:10px;width:200px}",""]);const a=i},195:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),r=s(645),i=s.n(r)()(o());i.push([e.id,"@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.5)}}.loadingSpinner{display:flex}.loadingSpinner .dot{animation:pulse 1.5s ease-in-out infinite;background-color:#464646;border-radius:50%;width:10px;height:10px;margin:4px}.loadingSpinner .dot:nth-child(2){animation-delay:1s}.loadingSpinner .dot:nth-child(3){animation-delay:.5s}",""]);const a=i},728:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),r=s(645),i=s.n(r)()(o());i.push([e.id,".flex-center-row,.response-window-header,.flex-center-column,.response-window-body{align-items:center;justify-content:center;flex-direction:row;display:flex}.flex-center-column,.response-window-body{flex-direction:column}.response-window,.response-window-header,.response-window-footer{border-radius:20px 20px 0px 0px}.response-window-header,.response-window-body,.response-window-footer{padding:10px}.response-window{background-color:#171717;box-shadow:2px 2px 15px #000;font-family:monospace;user-select:none;color:#fff;height:400px;width:250px;margin-bottom:20px;margin-top:20px}.response-window-header{background-color:#222;border-bottom:2px solid #464646;justify-content:space-evenly;cursor:pointer;padding:10px}.response-window-header img{width:40px;height:40px}.response-window-header p{font-weight:bold;font-size:15px;color:#fff}.response-window-footer{background-color:#222;color:#464646;text-align:center;font-weight:bold}.response-window-footer *{margin:0}.response-window-body{background-color:#171717;height:295px}",""]);const a=i},127:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),r=s(645),i=s.n(r)()(o());i.push([e.id,".ChatGPTResponse-RetryButton{box-shadow:2px 2px 10px #000;border-radius:10px;background-color:#222;margin-top:10px;cursor:pointer;padding:10px;width:100px;display:flex;align-items:center;justify-content:space-around;transition:.2s}.ChatGPTResponse-RetryButton:hover{background-color:#145060}",""]);const a=i},253:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),r=s(645),i=s.n(r)()(o());i.push([e.id,".PeterTV{justify-content:center;background-color:#000;align-items:center;overflow:hidden;margin-top:50px;height:125px;display:flex;width:190px;cursor:grab}.PeterTV__TVImage{position:absolute;width:200px}.PeterTV__video{width:150px}",""]);const a=i},356:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),r=s(645),i=s.n(r)()(o());i.push([e.id,".menu-item{border-bottom:1px solid #ccc;font-weight:bold;min-width:100px;font-size:14px;cursor:pointer;padding:10px;color:#000}.menu-item:last-child{border-bottom:none}",""]);const a=i},66:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),r=s(645),i=s.n(r)()(o());i.push([e.id,".flexCenter,#widget-button{justify-content:center;flex-direction:column;align-items:center;display:flex}.settings-box{user-select:none;box-shadow:4px 4px 5px #888;background-color:#fafafa;border:solid 3px #e6e6e6;font-family:monospace;border-radius:15px;transition:.2s;position:fixed;cursor:pointer;font-size:10px;z-index:100;color:#fff;bottom:20px;right:20px}.settings-box:hover{background-color:#a6a6a6;border:solid 3px #303030}#widget-button{transition:.2s;cursor:pointer;height:40px;width:40px}#widget-button img{height:25px;width:25px}#widget-menu{box-shadow:0 0 10px rgba(0,0,0,.1);background-color:#fff;margin-bottom:20px;border-radius:5px;transform:translateX(150px);position:absolute;transition:.2s;bottom:100%;z-index:1;right:0}#widget-menu.visible{transform:translateX(0px)}",""]);const a=i},411:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),r=s(645),i=s.n(r)()(o());i.push([e.id,".slider{background-color:#171717;justify-content:left;border-radius:10px;align-items:center;position:relative;transition:.3s;cursor:pointer;display:flex;height:20px;width:40px}.slider__set{background-color:#fff;border-radius:50%;position:absolute;transition:.3s;margin-left:2px;height:15px;width:15px}.slider.on{background-color:#ff9d1c}",""]);const a=i},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(i[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);n&&i[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),s&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=s):c[2]=s),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var r={},i=[],a=0;a<e.length;a++){var d=e[a],l=n.base?d[0]+n.base:d[0],c=r[l]||0,u="".concat(l," ").concat(c);r[l]=c+1;var p=s(u),m={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var h=o(m,n);n.byIndex=a,t.splice(a,0,{identifier:u,updater:h,references:1})}i.push(u)}return i}function o(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,o){var r=n(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<r.length;i++){var a=s(r[i]);t[a].references--}for(var d=n(e,o),l=0;l<r.length;l++){var c=s(r[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=d}}},569:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var o=void 0!==s.layer;o&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,o&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={id:n,exports:{}};return e[n](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.nc=void 0,(()=>{class e{body;constructor(){this.body=this.initTemplate()}appendChild(t){t instanceof e?this.body.element.appendChild(t.body.element):this.body.element.appendChild(t)}getBody(){return this.body}remove(){this.body.element.remove(),this.done()}initTemplate(){return this.template()}done(){}ready(){}}const t=e=>document.createElement(e),n=(e,t)=>e.appendChild(r(t)),o=(e,t=!1)=>t?document.querySelectorAll(e):document.querySelector(e),r=e=>e.getBody().element,i=(e,t)=>localStorage.setItem(e,t.toString()),a=()=>document.URL.includes("/exam/DoTestQuestion.html")||document.URL.includes("/exam/DoStartTest.html")||document.URL.includes("/exam/LoadQuestion.html");class d{static instance=new d;browser=this.getBrowser();static loadAsset(e){return this.instance.loadAssetUrl(e)}loadAssetUrl(e){switch(this.browser){case"Chrome":case"Edge":case"Opera":return chrome.runtime.getURL(e);case"Mozilla Firefox":browser.runtime.getURL(e);default:throw new Error(`${this.browser} your browser is not supported.`)}}getBrowser(){const e=window.navigator.userAgent;return e.includes("Firefox")?"Mozilla Firefox":e.includes("SamsungBrowser")?"Samsung Internet":e.includes("Opera")||e.includes("OPR")?"Opera":e.includes("Edge")||e.includes("Edg")?"Edge":e.includes("Chrome")?"Chrome":e.includes("Safari")?"Apple Safari":"Unknown"}}var l=s(379),c=s.n(l),u=s(795),p=s.n(u),m=s(569),h=s.n(m),f=s(565),g=s.n(f),y=s(216),x=s.n(y),b=s(589),w=s.n(b),v=s(356),S={};S.styleTagTransform=w(),S.setAttributes=g(),S.insert=h().bind(null,"head"),S.domAPI=p(),S.insertStyleElement=x(),c()(v.Z,S),v.Z&&v.Z.locals&&v.Z.locals;class T extends e{menuItemText;constructor(e){super(),this.menuItemText=e,this.body.element.textContent=this.menuItemText}template(){const e=t("div");return e.className="menu-item",{element:e}}}var C=s(195),k={};k.styleTagTransform=w(),k.setAttributes=g(),k.insert=h().bind(null,"head"),k.domAPI=p(),k.insertStyleElement=x(),c()(C.Z,k),C.Z&&C.Z.locals&&C.Z.locals;class A extends e{template(){const e=t("div");e.className="loadingSpinner";for(let s=0;s<3;s++){const s=t("div");s.className="dot",e.appendChild(s)}return{element:e}}}var Z=s(987),E={};E.styleTagTransform=w(),E.setAttributes=g(),E.insert=h().bind(null,"head"),E.domAPI=p(),E.insertStyleElement=x(),c()(Z.Z,E),Z.Z&&Z.Z.locals&&Z.Z.locals;class I extends e{errorText;template(){const e=t("p");return e.classList.add("ChatGPTResponse-ErrorPopUP"),{element:e}}constructor(e){super(),this.errorText=e,this.ready()}ready(){this.body.element.innerText=this.errorText}}var P=s(127),L={};L.styleTagTransform=w(),L.setAttributes=g(),L.insert=h().bind(null,"head"),L.domAPI=p(),L.insertStyleElement=x(),c()(P.Z,L),P.Z&&P.Z.locals&&P.Z.locals;class V extends e{constructor(){super(),this.ready()}template(){const e=t("div"),s=t("img");s.src=d.loadAsset("Assets/Icons/reload.svg");const n=t("p");return n.textContent="Retry",e.classList.add("ChatGPTResponse-RetryButton"),e.appendChild(n),e.appendChild(s),{element:e}}ready(){this.body?.element?.addEventListener("click",(()=>{B.turn(!1),B.turn(!0)}))}}var N=s(728),R={};R.styleTagTransform=w(),R.setAttributes=g(),R.insert=h().bind(null,"head"),R.domAPI=p(),R.insertStyleElement=x(),c()(N.Z,R),N.Z&&N.Z.locals&&N.Z.locals;class _ extends e{template(){const e=t("div");e.className="response-window";const s=t("header");s.className="response-window-header";const o=t("img");o.src=d.loadAsset("Assets/Icons/ai.svg"),o.alt="ai provider api logo",o.draggable=!1;const r=t("p");r.textContent="AI Solver ✨",s.appendChild(o),s.appendChild(r);const i=t("section");i.className="response-window-body";const a=new A;n(i,a);const l=t("footer");l.className="response-window-footer";const c=t("p");return c.textContent="RuntimeDevStudios.com",l.appendChild(c),e.appendChild(s),e.appendChild(i),e.appendChild(l),{element:e,structure:{responseBody:i,spinner:a}}}displayError(t){var s;this.body.structure?.responseBody&&(this.body.structure.spinner=void 0,(s=this.body.structure.responseBody)instanceof e&&(s=r(s)),s.childNodes.forEach((e=>e.remove())),this.body.structure&&(n(this.body.structure.responseBody,new I(t)),n(this.body.structure.responseBody,new V)))}}class z{static readQuestionText(){const e=o(".question_essence");return e?e.textContent:""}static readAnswers(){const e=o(".question_answers");if(!e)return"";let t="";return e.childNodes.forEach((e=>{const s=e.querySelector("p");s&&(t+=s.innerText+"\n")})),t}static getQuestionType(){switch(o(".question_answers input").type){case"radio":return 0;case"checkbox":return 1;default:return 2}}}class U{static insert(t,s=null){t=t instanceof e?r(t):t,null===s?document.body.append(t):s instanceof e?s.appendChild(t):s.append(t)}}class B{static window=null;static session=null;static turn(e){if(a())if(e){B.window=new _;const e=o(".question-area");if(U.insert(B.window,e),!window.ai)return void B.window?.displayError("Twoja przeglądarka nie obsługuje jeszcze Chrome AI API... 🤖");const t=z.readQuestionText()+"\n"+z.readAnswers();if(""===t.trim())return void this.window?.displayError("Nie mogę odczytać odpowiedzi ani pytania... 😥");(async()=>{try{const e=await window.ai.createGenericSession(),s=(await e.execute(t)).trim(),n=z.getQuestionType();if(this.session=e,2!==n){const t=o("label",!0);for(const r of t){const t=await e.execute(`\n                    Napisz "true" lub "false" zależnie od tego czy odpowiedź zgadza się z tekstem. text: "${s}". odpowiedz: "${r.textContent}"\n                  `);if(console.log(t),!JSON.parse(t))continue;const i=o(`#${r.htmlFor}`);if(0===n){i.click();break}1===n&&i.click()}}else o("input[type='text']").value=s;this.window?.displayError(s),this.destroySession()}catch(e){console.error(e),this.window?.displayError("Nie można utworzyć sesji. 😥")}})()}else B.window?.remove(),B.window=null,this.destroySession()}static destroySession(){this.session&&(this.session.destroy(),this.session=null)}}var j=s(253),O={};O.styleTagTransform=w(),O.setAttributes=g(),O.insert=h().bind(null,"head"),O.domAPI=p(),O.insertStyleElement=x(),c()(j.Z,O),j.Z&&j.Z.locals&&j.Z.locals;class q extends e{currentVideo=0;maxVideos=10;setPosition(e){const t=e.x-this.body.element.clientWidth/2+"px",s=e.y-this.body.element.clientHeight/2+"px";this.body.element.style.left=t,this.body.element.style.top=s}template(){const e=t("div");e.className="PeterTV";const s=t("img");s.src=d.loadAsset("Assets/PeterTV/peterTv.png"),s.alt="peterTV",s.className="PeterTV__TVImage";const n=t("video");return n.src=d.loadAsset(`Assets/PeterTV/vid_${this.currentVideo||0}.mp4`),n.addEventListener("ended",(()=>this.nextVideo())),n.addEventListener("dblclick",(()=>this.nextVideo())),n.className="PeterTV__video",n.autoplay=!0,e.appendChild(s),e.appendChild(n),{element:e,structure:{video:n}}}nextVideo(){this.currentVideo++,this.currentVideo%=this.maxVideos,this.body.structure.video.src=d.loadAsset(`Assets/PeterTV/vid_${this.currentVideo}.mp4`)}}class M{static window=null;static turn(e){if(e){if(document.URL.includes("/exam/DoTestQuestion.html")||document.URL.includes("/exam/DoStartTest.html")||document.URL.includes("/exam/LoadQuestion.html")){const e=o(".question-area"),t=new q;this.window=t,U.insert(t,e)}}else this.window?.remove()}}class Q{static build(e,s=!1){const n=t("script");return n.type="text/javascript",n.textContent="string"==typeof e?e:e.toString(),s?document.body.insertBefore(n,document.body.childNodes[0]):U.insert(n),n}}class ${static logScript=null;static blurScript=null;static turn(e){$.destroyScripts(),e&&($.logScript=Q.build("logToServer = () => {}"),$.blurScript=Q.build("Object.defineProperty(document, 'hasFocus', {get: () => {throw new ReferenceError('AntiBlur')},})"))}static destroyScripts(){$.logScript?.remove(),$.blurScript?.remove()}}var F=s(411),G={};G.styleTagTransform=w(),G.setAttributes=g(),G.insert=h().bind(null,"head"),G.domAPI=p(),G.insertStyleElement=x(),c()(F.Z,G),F.Z&&F.Z.locals&&F.Z.locals;class D{static onClick(){const e=z.readQuestionText(),t=encodeURI(`https://google.com/search?q=${e}`);window.open(t,"_blank")}static turn(e){if(!a())return;const t=o(".question_essence p");if(e)return t.style.fontWeight="bold",t.style.cursor="pointer",t.style.fontSize="20px",t.style.color="#007fff",void t.addEventListener("click",this.onClick);t.style.fontWeight="400",t.style.fontSize="1rem",t.style.cursor="text",t.style.color="#000",t.removeEventListener("click",this.onClick)}}class J extends e{key;on;constructor(e,t=!1){super(),this.key=e,this.on=t,this.ready()}template(){const e=t("div");e.className="slider",document.body.appendChild(e);const s=t("div");return s.className="slider__set",e.appendChild(s),{element:e,structure:{sliderSet:s}}}ready(){localStorage.getItem(this.key)&&(this.on=JSON.parse(localStorage.getItem(this.key))),this.setState(this.on),this.body.element.addEventListener("click",(()=>{this.setState(!this.on),this.setSettingState(),"com.runtimedevstudios.anti-testportal+.peter-tv"==this.key&&M.turn(this.on)}))}setState(e){let t=e?120:0;e?this.body.element.classList.add("on"):this.body.element.classList.remove("on"),this.body.structure.sliderSet.style.transform=`translateX(${t}%)`,this.on=e}setSettingState(){switch(localStorage.setItem(this.key,this.on?"true":"false"),this.setState(JSON.parse(localStorage.getItem(this.key))),this.key){case"com.runtimedevstudios.anti-testportal+.blur":$.turn(this.on);break;case"com.runtimedevstudios.anti-testportal+.ai-solver":B.turn(this.on);break;case"com.runtimedevstudios.anti-testportal+.google-search":D.turn(this.on)}}}var H=s(66),W={};W.styleTagTransform=w(),W.setAttributes=g(),W.insert=h().bind(null,"head"),W.domAPI=p(),W.insertStyleElement=x(),c()(H.Z,W),H.Z&&H.Z.locals&&H.Z.locals;class X extends e{visible=!1;template(){const e=t("div");e.classList.add("settings-box"),U.insert(e);const s=t("div");s.id="widget-menu",e.appendChild(s);const n=t("div");n.id="widget-button";const o=t("img");return o.src=d.loadAsset("Assets/Icons/logo.png"),o.draggable=!1,o.classList.add("SettingsBox__image"),n.appendChild(o),e.appendChild(n),n.addEventListener("click",(()=>{s.classList.toggle("visible"),this.visible=s.classList.contains("visible"),i("com.runtimedevstudios.anti-testportal+.window-open",this.visible)})),this.get("com.runtimedevstudios.anti-testportal+.window-open")&&(s.classList.add("visible"),this.visible=!0),{element:e,structure:{menu:s}}}loadSliders(){const e=this.body.structure?.menu;new Map([["com.runtimedevstudios.anti-testportal+.blur",{name:"Anti Blur 🫧",defaultValue:!0}],["com.runtimedevstudios.anti-testportal+.ai-solver",{name:"AI Solver 🤖",defaultValue:!0}],["com.runtimedevstudios.anti-testportal+.peter-tv",{name:"PeterTV 📺",defaultValue:!1}],["com.runtimedevstudios.anti-testportal+.google-search",{name:"Google Search 🔍",defaultValue:!0}]]).forEach(((t,s)=>{localStorage.getItem(s)||i(s,t.defaultValue);const n=new T(t.name),o=new J(s);n.appendChild(o),e.appendChild(r(n))}))}get(e){return!!localStorage.getItem(e)&&(e=>{const t=localStorage.getItem(e);return!!t&&JSON.parse(t)})(e)}loadSettings(){D.turn(this.get("com.runtimedevstudios.anti-testportal+.google-search")),$.turn(this.get("com.runtimedevstudios.anti-testportal+.blur")),B.turn(this.get("com.runtimedevstudios.anti-testportal+.ai-solver")),M.turn(this.get("com.runtimedevstudios.anti-testportal+.peter-tv")),this.loadSliders()}}document.URL.includes("/manager/")||(new X).loadSettings()})()})();